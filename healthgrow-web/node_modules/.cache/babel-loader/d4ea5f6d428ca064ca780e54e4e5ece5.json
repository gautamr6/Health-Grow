{"ast":null,"code":"import React, { Component } from 'react';\nimport * as d3 from \"d3\";\n\nclass RowChart extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      data: [{\n        skill: \"CSS\",\n        value: 80\n      }, {\n        skill: \"HTML\",\n        value: 70\n      }, {\n        skill: \"JS\",\n        value: 85\n      }, {\n        skill: \"ANGULAR\",\n        value: 90\n      }, {\n        skill: \"REACT\",\n        value: 75\n      }, {\n        skill: \"D3\",\n        value: 70\n      }, {\n        skill: \"NODE JS\",\n        value: 65\n      }, {\n        skill: \"JAVA\",\n        value: 65\n      }, {\n        skill: \"UI DESIGN\",\n        value: 70\n      }, {\n        skill: \"XD\",\n        value: 65\n      }],\n      yAxisAttribute: \"skill\",\n      xAxisAttribute: \"value\",\n      width: 0,\n      height: 0\n    };\n    this.chartRef = React.createRef();\n    this.drawChart = this.drawChart.bind(this);\n  }\n\n  componentDidMount() {\n    let width = this.getWidth();\n    let height = this.getHeight();\n    this.setState({\n      width: width,\n      height: height\n    }, () => {\n      this.drawChart();\n    });\n    let resizedFn;\n    window.addEventListener(\"resize\", () => {\n      clearTimeout(resizedFn);\n      resizedFn = setTimeout(() => {\n        this.redrawChart();\n      }, 200);\n    });\n  }\n\n  redrawChart() {\n    let width = this.setWidth();\n    this.setState({\n      width: width\n    });\n    d3.select(\".rowChart svg\").remove();\n    this.drawChart = this.drawChart.bind(this);\n    this.drawChart();\n  }\n\n  getWidth() {\n    return this.chartRef.current.parentElement.offsetWidth;\n  }\n\n  getHeight() {\n    return this.chartRef.current.parentElement.offsetHeight;\n  }\n\n  drawChart() {\n    let margin = {\n      top: 20,\n      right: 30,\n      bottom: 40,\n      left: 90\n    },\n        width = this.state.width - margin.left - margin.right,\n        height = this.state.height - margin.top - margin.bottom; // append the svg object to the body of the page\n\n    let svg = d3.select(\".rowChart\").append(\"svg\").attr(\"width\", width + margin.left + margin.right).attr(\"height\", height + margin.top + margin.bottom).append(\"g\").attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\"); // Add X axis\n\n    let x = d3.scaleLinear().domain([0, 100]).range([0, width]);\n    svg.append(\"g\").attr(\"transform\", \"translate(0,\" + height + \")\").attr('class', 'axis x').call(d3.axisBottom(x)).selectAll(\"text\").attr(\"transform\", \"translate(-10,0)rotate(-45)\").style(\"text-anchor\", \"end\"); // Add Y axis\n\n    let y = d3.scaleBand().range([0, height]).domain(this.state.data.map(d => d[this.state.yAxisAttribute])).padding(.1);\n    svg.append(\"g\").attr('class', 'axis y').call(d3.axisLeft(y)).selectAll(\"text\").attr(\"dy\", null); // Add Bars\n\n    svg.selectAll(\"myRect\").data(this.state.data).enter().append(\"rect\").on('mouseover', function () {\n      d3.select(this).style('opacity', 0.5);\n    }).on('mouseout', function () {\n      d3.select(this).style('opacity', 1);\n    }).attr(\"x\", x(0)).attr(\"y\", d => y(d[this.state.yAxisAttribute])).attr(\"width\", 0).attr(\"height\", y.bandwidth() - 10).attr(\"fill\", \"#DF337D\").transition(d3.transition().duration(1000)).attr(\"width\", d => x(d[this.state.xAxisAttribute]));\n  }\n\n}\n\nexport default RowChart;","map":{"version":3,"sources":["/Users/ksun/Downloads/350S20-43/healthgrow-web/src/components/Chart.js"],"names":["React","Component","d3","RowChart","constructor","props","state","data","skill","value","yAxisAttribute","xAxisAttribute","width","height","chartRef","createRef","drawChart","bind","componentDidMount","getWidth","getHeight","setState","resizedFn","window","addEventListener","clearTimeout","setTimeout","redrawChart","setWidth","select","remove","current","parentElement","offsetWidth","offsetHeight","margin","top","right","bottom","left","svg","append","attr","x","scaleLinear","domain","range","call","axisBottom","selectAll","style","y","scaleBand","map","d","padding","axisLeft","enter","on","bandwidth","transition","duration"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport * as d3 from \"d3\";\n\nclass RowChart extends React.Component {\n  constructor(props) {\n      super(props);\n\n      this.state = {\n        data: [{skill: \"CSS\", value: 80},{skill: \"HTML\", value: 70},{skill: \"JS\", value: 85},{skill: \"ANGULAR\", value: 90},{skill: \"REACT\", value: 75},{skill: \"D3\", value: 70},{skill: \"NODE JS\", value: 65},{ skill: \"JAVA\", value: 65},{skill: \"UI DESIGN\", value: 70},{skill: \"XD\", value: 65}],\n        yAxisAttribute: \"skill\",\n        xAxisAttribute: \"value\",\n        width: 0,\n        height: 0,\n    }\n      this.chartRef = React.createRef();\n      this.drawChart = this.drawChart.bind(this);\n  }\n\n  componentDidMount() {\n    let width = this.getWidth()\n    let height = this.getHeight();\n    this.setState({width: width, height: height}, ()=> {\n        this.drawChart();\n    });\n    let resizedFn;\n    window.addEventListener(\"resize\", () => {\n        clearTimeout(resizedFn);\n        resizedFn = setTimeout(() => {\n            this.redrawChart();\n        }, 200)\n    });\n}\nredrawChart() {\n    let width = this.setWidth()\n    this.setState({width: width});\n    d3.select(\".rowChart svg\").remove();\n    this.drawChart = this.drawChart.bind(this);\n    this.drawChart();\n}\n\ngetWidth(){\n  return this.chartRef.current.parentElement.offsetWidth;\n}\ngetHeight(){\n  return this.chartRef.current.parentElement.offsetHeight;\n}\n\n  drawChart() {\n    let margin = {top: 20, right: 30, bottom: 40, left: 90},\n                width = this.state.width - margin.left - margin.right,\n                height = this.state.height - margin.top - margin.bottom;\n    // append the svg object to the body of the page\n    let svg = d3.select(\".rowChart\")\n            .append(\"svg\")\n            .attr(\"width\", width + margin.left + margin.right)\n            .attr(\"height\", height + margin.top + margin.bottom)\n            .append(\"g\")\n            .attr(\"transform\",\n            \"translate(\" + margin.left + \",\" + margin.top + \")\");\n    // Add X axis\n    let x = d3.scaleLinear()\n            .domain([0, 100])\n            .range([ 0, width]);\n    svg.append(\"g\")\n            .attr(\"transform\", \"translate(0,\" + height + \")\")\n            .attr('class','axis x')\n            .call(d3.axisBottom(x))\n            .selectAll(\"text\")\n            .attr(\"transform\", \"translate(-10,0)rotate(-45)\")\n            .style(\"text-anchor\", \"end\");\n    // Add Y axis\n    let y = d3.scaleBand()\n            .range([ 0, height ])\n            .domain(this.state.data.map((d) =>  d[this.state.yAxisAttribute]))\n            .padding(.1);\n    svg.append(\"g\")\n            .attr('class','axis y')\n            .call(d3.axisLeft(y))\n            .selectAll(\"text\")\n            .attr(\"dy\", null)\n    // Add Bars\n    svg.selectAll(\"myRect\")\n            .data(this.state.data)\n            .enter()\n            .append(\"rect\")\n            .on('mouseover', function(){\n                d3.select(this).style('opacity', 0.5)\n             })\n            .on('mouseout', function(){\n                d3.select(this).style('opacity', 1)\n             })\n            .attr(\"x\", x(0) )\n            .attr(\"y\", (d) => y(d[this.state.yAxisAttribute]))\n            .attr(\"width\", 0)\n            .attr(\"height\", y.bandwidth() -10 )\n            .attr(\"fill\", \"#DF337D\")\n            .transition(d3.transition().duration(1000))\n            .attr(\"width\", (d) => x(d[this.state.xAxisAttribute]))\n    }\n}\n\nexport default RowChart;"]},"metadata":{},"sourceType":"module"}